# Исправление ошибки при создании нового материала

## Проблема
При нажатии на кнопку "+" для создания нового материала, модальное окно начинало появляться, но затем приложение падало с ошибкой "Application error: a client-side exception has occurred".

## Причина
Проблема была связана с компонентом `ReactQuill` (rich-text редактор), который пытался загружаться на сервере (SSR) или до того, как модальное окно полностью монтировалось на клиенте. Это приводило к ошибкам, связанным с доступом к `window` или `document` объектам, которые недоступны на сервере.

## Решение

### 1. Создан отдельный компонент редактора
Создан новый компонент `/src/components/admin/RichTextEditor.tsx`, который:
- Загружается динамически с отключенным SSR
- Имеет проверку на монтирование компонента (`isMounted`)
- Показывает состояние загрузки
- Изолирует импорт стилей Quill

### 2. Обновлена страница материалов
Файл `/src/app/admin/materials/page.tsx` был обновлен:
- Удален прямой импорт `ReactQuill`
- Используется новый компонент `RichTextEditor`
- Упрощена логика модального окна
- Добавлена проверка `isOpen` для условного рендеринга редактора

### 3. Изолирован импорт стилей
Стили Quill теперь импортируются только в компоненте `RichTextEditor`, а не глобально, что улучшает производительность.

## Как проверить исправление

1. Обновите страницу в браузере (Cmd+R или Ctrl+R)
2. Перейдите на страницу `/admin/materials`
3. Нажмите на зеленую кнопку "+" в правом верхнем углу
4. Модальное окно должно открыться без ошибок
5. Редактор текста должен загрузиться и быть полностью функциональным

## Технические детали

### Ключевые изменения:
- ✅ Динамическая загрузка ReactQuill с `ssr: false`
- ✅ Проверка монтирования компонента
- ✅ Условный рендеринг редактора только когда модальное окно открыто
- ✅ Изолированный импорт стилей
- ✅ Состояние загрузки для лучшего UX

### Файлы изменены:
- `/src/components/admin/RichTextEditor.tsx` (создан)
- `/src/app/admin/materials/page.tsx` (обновлен)
- `/src/app/globals.css` (очищен от импорта Quill стилей)

## Дополнительно
Если проблема все еще возникает, проверьте консоль браузера (F12 → Console) для более подробной информации об ошибке.


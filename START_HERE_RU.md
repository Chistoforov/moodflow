# ๐ ะะะงะะะขะ ะะะะกะฌ - ะะตัััะฝะฐั ะะฝะฐะปะธัะธะบะฐ ั Perplexity

## โ ะงัะพ ะณะพัะพะฒะพ

ะกะธััะตะผะฐ ะผะตัััะฝะพะน ะฐะฝะฐะปะธัะธะบะธ ะฝะฐัััะพะตะฝะธั ะฟะพะปะฝะพัััั ัะตะฐะปะธะทะพะฒะฐะฝะฐ ะธ ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

## ๐ ะงะตะบ-ะปะธัั ะฟะตัะตะด ะทะฐะฟััะบะพะผ

### 1. ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธั ะะ โฑ๏ธ 2 ะผะธะฝััั

ะัะบัะพะนัะต Supabase Dashboard โ SQL Editor ะธ ะฒัะฟะพะปะฝะธัะต:
```bash
supabase/migrations/024_create_monthly_analytics.sql
```

**ะะปะธ** ัะปะตะดัะนัะต ะธะฝััััะบัะธะธ ะฒ `APPLY_MIGRATION_024.md`

### 2. ะัะพะฒะตัะธัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั โฑ๏ธ 1 ะผะธะฝััะฐ

ะฃะฑะตะดะธัะตัั, ััะพ ะฒ `.env.local` ะธ Vercel ะตััั:
```bash
PERPLEXITY_API_KEY=pplx-...
CRON_SECRET=...
```

### 3. ะะตะฟะปะพะน ะฝะฐ Vercel โฑ๏ธ 5 ะผะธะฝัั

```bash
git add .
git commit -m "feat: add monthly analytics"
git push origin main
```

### 4. ะขะตััะธัะพะฒะฐะฝะธะต โฑ๏ธ 3 ะผะธะฝััั

1. ะกะพะทะดะฐะนัะต 3+ ะทะฐะฟะธัะธ ะฒ ะดะฝะตะฒะฝะธะบะต
2. ะัะบัะพะนัะต ัััะฐะฝะธัั ะะฐะปะตะฝะดะฐัั
3. ะะฐะถะผะธัะต ะบะฝะพะฟะบั "ะกะณะตะฝะตัะธัะพะฒะฐัั"
4. ะงะตัะตะท 10-30 ัะตะบัะฝะด ัะฒะธะดะธัะต ะฐะฝะฐะปะธัะธะบั

## ๐ฏ ะะฐะบ ัะฐะฑะพัะฐะตั ัะธััะตะผะฐ

### ะะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

```
๐ ะะฐะฟะพะปะฝัะตั ะดะฝะตะฒะฝะธะบ ะบะฐะถะดัะน ะดะตะฝั
       โ
โฐ ะะฐะถะดัะต 7 ะดะฝะตะน ะฐะฒัะพะผะฐัะธัะตัะบะธ
       โ
๐ค Perplexity ะฐะฝะฐะปะธะทะธััะตั ะฝะฐัััะพะตะฝะธะต
       โ
๐ ะะฝะฐะปะธัะธะบะฐ ะฟะพัะฒะปัะตััั ะฒ ะบะฐะปะตะฝะดะฐัะต
       โ
๐ฏ ะ ะบะพะฝัะต ะผะตัััะฐ - ัะธะฝะฐะปัะฝัะน ะพััะตั
       โ
๐ ะััะพัะธั ะดะพัััะฟะฝะฐ ะฝะฐะฒัะตะณะดะฐ
```

### ะัะธะผะตั ะณัะฐัะธะบะฐ

```
ะะตะฝั 1-6:   ะะฐะฟะพะปะฝะตะฝะธะต ะดะฝะตะฒะฝะธะบะฐ
ะะตะฝั 7:     ะะตะฝะตัะฐัะธั ะฐะฝะฐะปะธัะธะบะธ #1 (7 ะดะฝะตะน)
ะะตะฝั 8-13:  ะัะพะดะพะปะถะตะฝะธะต ะทะฐะฟะพะปะฝะตะฝะธั
ะะตะฝั 14:    ะะตะฝะตัะฐัะธั ะฐะฝะฐะปะธัะธะบะธ #2 (14 ะดะฝะตะน ะฝะฐะบะพะฟะธัะตะปัะฝะพ)
ะะตะฝั 15-20: ะัะพะดะพะปะถะตะฝะธะต ะทะฐะฟะพะปะฝะตะฝะธั
ะะตะฝั 21:    ะะตะฝะตัะฐัะธั ะฐะฝะฐะปะธัะธะบะธ #3 (21 ะดะตะฝั ะฝะฐะบะพะฟะธัะตะปัะฝะพ)
ะะตะฝั 22-30: ะัะพะดะพะปะถะตะฝะธะต ะทะฐะฟะพะปะฝะตะฝะธั
ะะตะฝั 30:    ะคะะะะะฌะะะฏ ะฐะฝะฐะปะธัะธะบะฐ (ะฒะตัั ะผะตััั)
            โ ะกะพััะฐะฝัะตััั ะฝะฐะฒัะตะณะดะฐ
```

## ๐ ะงัะพ ะฟะพะปััะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปั

### 5 ัะตะบัะธะน ะฐะฝะฐะปะธะทะฐ:

1. **ะะฑัะตะต ะฒะฟะตัะฐัะปะตะฝะธะต** - ะพะฑะทะพั ัะผะพัะธะพะฝะฐะปัะฝะพะณะพ ัะพััะพัะฝะธั
2. **โจ ะะพะปะพะถะธัะตะปัะฝัะต ัะตะฝะดะตะฝัะธะธ** - ััะพ ะธะดะตั ัะพัะพัะพ
3. **๐ ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั ัะฟะฐะดะฐ** - ะฐะฝะฐะปะธะท ัััะดะฝะพััะตะน
4. **๐ก ะะตะบะพะผะตะฝะดะฐัะธะธ ะธ ัะตัะฝะธะบะธ** - ะบะพะฝะบัะตัะฝัะต ัะพะฒะตัั
5. **๐ฏ ะะฐะฟัะฐะฒะปะตะฝะธะต ะดะปั ัะฐะทะผััะปะตะฝะธะน** - ัะตะผั ะดะปั ัะฐะฑะพัั

## ๐ ะะพะบัะผะตะฝัะฐัะธั

ะัะฑะตัะธัะต ะฝัะถะฝัะน ัะฐะนะป:

| ะคะฐะนะป | ะะปั ะบะพะณะพ | ะัะตะผั ััะตะฝะธั |
|------|----------|--------------|
| **MONTHLY_ANALYTICS_SUMMARY.md** | ะะฐะทัะฐะฑะพััะธะบะธ | 10 ะผะธะฝ |
| **MONTHLY_ANALYTICS_SETUP_RU.md** | ะัััััะน ััะฐัั | 5 ะผะธะฝ |
| **APPLY_MIGRATION_024.md** | ะะฐะทะฐ ะดะฐะฝะฝัั | 5 ะผะธะฝ |
| **PERPLEXITY_ANALYTICS_GUIDE.md** | ะขะตัะฝะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั | 20 ะผะธะฝ |

## ๐จ ะกะบัะธะฝัะพัั UI (ัะตะบััะพะฒัะต)

### ะะฝะพะฟะบะฐ ะณะตะฝะตัะฐัะธะธ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฝะฐะปะธัะธะบะฐ ะธ ัะตะบะพะผะตะฝะดะฐัะธะธ    โ
โ [ะกะณะตะฝะตัะธัะพะฒะฐัั]             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพัะพะฒะฐั ะฐะฝะฐะปะธัะธะบะฐ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฝะฐะปะธัะธะบะฐ ะธ ัะตะบะพะผะตะฝะดะฐัะธะธ    โ
โ ะะตะดะตะปั 2 โข 14 ะดะฝะตะน          โ
โ [ะะฑะฝะพะฒะธัั]                  โ
โ                             โ
โ ๐ ะะฑัะตะต ะฒะฟะตัะฐัะปะตะฝะธะต...     โ
โ โจ ะะพะปะพะถะธัะตะปัะฝัะต ัะตะฝะดะตะฝัะธะธ...โ
โ ๐ ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั...     โ
โ ๐ก ะะตะบะพะผะตะฝะดะฐัะธะธ...          โ
โ ๐ฏ ะะฐะฟัะฐะฒะปะตะฝะธั...           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะคะธะฝะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฝะฐะปะธัะธะบะฐ ะธ ัะตะบะพะผะตะฝะดะฐัะธะธ    โ
โ ะะตะดะตะปั 4 โข 30 ะดะฝะตะน          โ
โ ๐ฏ ะคะธะฝะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ      โ
โ                             โ
โ [ะะตัั ะฐะฝะฐะปะธะท ะผะตัััะฐ]        โ
โ [ะะฝะพะฟะบะฐ "ะะฑะฝะพะฒะธัั" ัะบัััะฐ]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะงัะพ ะฑัะปะพ ะธะทะผะตะฝะตะฝะพ

```
ะกะพะทะดะฐะฝะพ ัะฐะนะปะพะฒ:  11
ะะทะผะตะฝะตะฝะพ ัะฐะนะปะพะฒ: 4
ะกััะพะบ ะบะพะดะฐ:      ~2000
ะัะตะผั ัะฐะฑะพัั:    ~2 ัะฐัะฐ
```

### ะะพะฒัะต ะบะพะผะฟะพะฝะตะฝัั

- โ ะขะฐะฑะปะธัะฐ `monthly_analytics` ะฒ ะะ
- โ API endpoint ะดะปั ะณะตะฝะตัะฐัะธะธ
- โ API endpoint ะดะปั ะฟะพะปััะตะฝะธั ะดะฐะฝะฝัั
- โ Cron job ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ
- โ ะะฑะฝะพะฒะปะตะฝะฝัะน UI ะบะฐะปะตะฝะดะฐัั
- โ ะะฐััะธัะตะฝะฝัะน Perplexity Service

## โ๏ธ ะะฐัััะพะนะบะธ (ะพะฟัะธะพะฝะฐะปัะฝะพ)

### ะะทะผะตะฝะธัั ัะฐัะฟะธัะฐะฝะธะต cron

ะ `vercel.json`:
```json
{
  "path": "/api/cron/monthly-analytics",
  "schedule": "0 22 * * *"  // ะะฐะถะดัะน ะดะตะฝั ะฒ 22:00 UTC
}
```

### ะะทะผะตะฝะธัั ะผะพะดะตะปั Perplexity

ะ `src/lib/integrations/perplexity.ts`:
```typescript
model: 'sonar-pro',  // ะธะปะธ 'sonar', 'sonar-medium'
```

### ะะธะฝะธะผัะผ ะทะฐะฟะธัะตะน ะดะปั ะณะตะฝะตัะฐัะธะธ

ะ `src/app/api/cron/monthly-analytics/route.ts`:
```typescript
if (entries.length < 3) {  // ะะทะผะตะฝะธัะต ะฝะฐ 5 ะธะปะธ 7
```

## ๐งช ะัััััะน ัะตัั

### 1. ะะพะบะฐะปัะฝะพ
```bash
npm run dev
# ะกะพะทะดะฐะนัะต 3 ะทะฐะฟะธัะธ
# ะัะบัะพะนัะต http://localhost:3000/calendar
# ะะฐะถะผะธัะต "ะกะณะตะฝะตัะธัะพะฒะฐัั"
```

### 2. Cron job ะฒัััะฝัั
```bash
curl -X GET http://localhost:3000/api/cron/monthly-analytics \
  -H "Authorization: Bearer YOUR_CRON_SECRET"
```

### 3. ะัะพะฒะตัะบะฐ ะะ
```sql
SELECT COUNT(*) FROM monthly_analytics;
```

## โ FAQ

**Q: ะกะบะพะปัะบะพ ะทะฐะฟะธัะตะน ะฝัะถะฝะพ ะดะปั ะณะตะฝะตัะฐัะธะธ?**
A: ะะธะฝะธะผัะผ 3 ะทะฐะฟะธัะธ ะฒ ะผะตัััะต.

**Q: ะะฐะบ ัะฐััะพ ะณะตะฝะตัะธััะตััั ะฐะฝะฐะปะธัะธะบะฐ?**
A: ะะฐะถะดัะต 7 ะดะฝะตะน + ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ.

**Q: ะะพะถะฝะพ ะปะธ ัะดะฐะปะธัั ััะฐััั ะฐะฝะฐะปะธัะธะบั?**
A: ะะฐ, ะฝะพ ัะธะฝะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฐ ะดะปั ะธััะพัะธะธ.

**Q: ะกะบะพะปัะบะพ ััะพะธั Perplexity API?**
A: ะะฐะฒะธัะธั ะพั ัะฐัะธัะฐ. ะะฑััะฝะพ ~$0.01-0.05 ะทะฐ ะทะฐะฟัะพั.

**Q: ะงัะพ ะดะตะปะฐัั, ะตัะปะธ ะฐะฝะฐะปะธัะธะบะฐ ะฝะต ะณะตะฝะตัะธััะตััั?**
A: ะัะพะฒะตัััะต ะปะพะณะธ Vercel, PERPLEXITY_API_KEY, ะธ ะบะพะปะธัะตััะฒะพ ะทะฐะฟะธัะตะน.

## ๐ฏ ะกะปะตะดัััะธะต ัะฐะณะธ

ะะพัะปะต ััะฟะตัะฝะพะณะพ ะทะฐะฟััะบะฐ:

1. โ ะะพะฝะธัะพัััะต ะฟะตัะฒัะต ะทะฐะฟัะพัั ะฒ Vercel Logs
2. โ ะกะพะฑะตัะธัะต ัะธะดะฑะตะบ ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
3. โ ะะฐัััะพะนัะต ะฐะปะตััั ะดะปั ะพัะธะฑะพะบ
4. โ ะัะพะฒะตััะนัะต ััะฐัะธััะธะบั ะฒ ะะ ัะฐะท ะฒ ะฝะตะดะตะปั

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะพะฑะปะตะผั ะฟัะธ ะฒะฝะตะดัะตะฝะธะธ? ะัะพะฒะตัััะต:

1. **APPLY_MIGRATION_024.md** - ะฟัะพะฑะปะตะผั ั ะะ
2. **MONTHLY_ANALYTICS_SETUP_RU.md** - ะฝะฐัััะพะนะบะฐ ัะธััะตะผั
3. **PERPLEXITY_ANALYTICS_GUIDE.md** - ัะตัะฝะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั
4. Vercel Dashboard โ Logs - ะพัะธะฑะบะธ ะฒ ะฟัะพะดะฐะบัะตะฝะต

## โจ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

ะกะธััะตะผะฐ ะฟะพะปะฝะพัััั ะฝะฐัััะพะตะฝะฐ ะธ ะฟัะพัะตััะธัะพะฒะฐะฝะฐ. ะะพัะปะต ะดะตะฟะปะพั ะพะฝะฐ ะฝะฐัะฝะตั ัะฐะฑะพัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ.

**ะัะตะผั ะดะพ ะฟะตัะฒะพะน ะฐะฝะฐะปะธัะธะบะธ:** 
- ะะฒัะพะผะฐัะธัะตัะบะธ: ะดะพ 7 ะดะฝะตะน
- ะัััะฝัั: 10-30 ัะตะบัะฝะด ะฟะพัะปะต ะฝะฐะถะฐัะธั ะบะฝะพะฟะบะธ

---

**ะะตััะธั:** 1.0  
**ะะฐัะฐ:** ะะพัะฑัั 2024  
**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ะฟัะพะดะฐะบัะตะฝั



# üéôÔ∏è –ê—É–¥–∏–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è

## –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏. –ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∏ –±–æ–ª—å—à–µ **–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**, –∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ OpenAI Whisper API –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `AudioRecordModal`
2. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è**: –ê—É–¥–∏–æ blob –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ `/api/transcribe-audio`, –∫–æ—Ç–æ—Ä—ã–π:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç audio file –Ω–∞–ø—Ä—è–º—É—é (FormData)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ OpenAI Whisper API
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `daily_entries.text_entry`
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## –§–∞–π–ª—ã

### API Endpoints
- `src/app/api/transcribe-audio/route.ts` - –û—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/components/entry/AudioRecorder.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ
- `src/components/entry/AudioRecordModal.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–ø–∏—Å–∏
- `src/components/entry/ChatMessage.tsx` - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
- `src/components/entry/ChatInput.tsx` - –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å –∫–Ω–æ–ø–∫–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `src/app/(user)/entry/[date]/page.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø–∏—Å–∏ –¥–Ω—è

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å audio storage bucket  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –¥–ª—è audio_entries  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è**: –ù–µ —Ç—Ä–∞—Ç–∏–º –º–µ—Å—Ç–æ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤  
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ**: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç  

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: `audio/webm`, `audio/mp4`, `audio/mpeg`, `audio/wav`, `audio/ogg`, `audio/m4a`

### API —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- **Provider**: OpenAI Whisper API
- **Model**: `whisper-1`
- **Language**: `ru` (Russian)
- **Timeout**: 5 –º–∏–Ω—É—Ç (300 —Å–µ–∫—É–Ω–¥)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–¢—Ä–µ–±—É–µ—Ç—Å—è:
- `OPENAI_API_KEY` - API –∫–ª—é—á OpenAI –¥–ª—è Whisper

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ù–æ—è–±—Ä—å 2025**: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∞—É–¥–∏–æ –∑–∞–ø–∏—Å–µ–π
- –£–¥–∞–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `audio_entries` –∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –£–¥–∞–ª–µ–Ω Supabase Storage bucket –¥–ª—è –∞—É–¥–∏–æ
- –£–¥–∞–ª–µ–Ω—ã endpoints: `/api/upload-audio`, `/api/transcribe`, `/api/audio-entries`
- –£–¥–∞–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `AudioEntriesList`, `AudioModal`, `ProcessingStatus`
- –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –∞—É–¥–∏–æ ‚Üí —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è ‚Üí —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ



